!function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";var o,s;void 0===(s="function"==typeof(o=function(){return function(e){function t(){var e=document.documentElement.clientHeight,t=window.innerHeight||0;_=Math.max(e,t)}function n(){w=!1;var e=function(){if(y&&"number"==typeof y){var e=Math.min(Math.max(0,y),1);return _-e*_}return _}();(x=x.filter((function(t){var n=t.getBoundingClientRect(),o=n.top,s=n.bottom,i=n.height,l=o<e,r=s<e;if(l&&!t.__ev_entered){if(a(t),t.__ev_progress=0,h(t,t.__ev_progress),m)return!1}else!l&&t.__ev_entered&&(t.__ev_progress=0,h(t,t.__ev_progress),f(t));if(l&&!r){var c=(e-o)/i;t.__ev_progress=Math.min(1,Math.max(0,c)),h(t,t.__ev_progress)}return l&&r&&1!==t.__ev_progress&&(t.__ev_progress=1,h(t,t.__ev_progress)),t.__ev_entered=l,!0}))).length||window.removeEventListener("scroll",o,!0)}function o(){w||(w=!0,v(n))}function s(){t(),n()}function i(){t(),n()}function l(e){for(var t=e.length,n=[],o=0;o<t;o+=1)n.push(e[o]);return n}function r(){x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"==typeof e?l(t.querySelectorAll(e)):e instanceof NodeList?l(e):e instanceof Array?e:void 0}(c)}var c=e.selector,d=e.enter,a=void 0===d?function(){}:d,u=e.exit,f=void 0===u?function(){}:u,g=e.progress,h=void 0===g?function(){}:g,p=e.offset,y=void 0===p?0:p,b=e.once,m=void 0!==b&&b,v=null,w=!1,x=[],_=0;c?(r(),x&&x.length?(v=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},window.addEventListener("resize",s,!0),window.addEventListener("scroll",o,!0),window.addEventListener("load",i,!0),s(),n()):console.error("no selector elements found")):console.error("must pass a selector")}})?o.call(t,n,t,e):o)||(e.exports=s)},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,i=/^0o[0-7]+$/i,l=parseInt,r="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,d=r||c||Function("return this")(),a=Object.prototype.toString,u=Math.max,f=Math.min,g=function(){return d.Date.now()};function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function p(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==a.call(e)}(e))return NaN;if(h(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=h(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var r=s.test(e);return r||i.test(e)?l(e.slice(2),r?2:8):o.test(e)?NaN:+e}e.exports=function(e,t,n){var o,s,i,l,r,c,d=0,a=!1,y=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=o,i=s;return o=s=void 0,d=t,l=e.apply(i,n)}function v(e){return d=e,r=setTimeout(x,t),a?m(e):l}function w(e){var n=e-c;return void 0===c||n>=t||n<0||y&&e-d>=i}function x(){var e=g();if(w(e))return _(e);r=setTimeout(x,function(e){var n=t-(e-c);return y?f(n,i-(e-d)):n}(e))}function _(e){return r=void 0,b&&o?m(e):(o=s=void 0,l)}function k(){var e=g(),n=w(e);if(o=arguments,s=this,c=e,n){if(void 0===r)return v(c);if(y)return r=setTimeout(x,t),m(c)}return void 0===r&&(r=setTimeout(x,t)),l}return t=p(t)||0,h(n)&&(a=!!n.leading,i=(y="maxWait"in n)?u(p(n.maxWait)||0,t):i,b="trailing"in n?!!n.trailing:b),k.cancel=function(){void 0!==r&&clearTimeout(r),d=0,o=c=s=r=void 0},k.flush=function(){return void 0===r?l:_(g())},k}}).call(this,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var o=n(1),s=n.n(o);const i={android:()=>navigator.userAgent.match(/Android/i),blackberry:()=>navigator.userAgent.match(/BlackBerry/i),ios:()=>navigator.userAgent.match(/iPhone|iPad|iPod/i),opera:()=>navigator.userAgent.match(/Opera Mini/i),windows:()=>navigator.userAgent.match(/IEMobile/i),any:()=>i.android()||i.blackberry()||i.ios()||i.opera()||i.windows()};var l=i;function r(){(function(e,t=document){return[...t.querySelectorAll(e)]})("[target='_blank']").forEach(e=>e.setAttribute("rel","noopener"))}const c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>',d=d3.select("body");function a(e,t,n){const o=e.classed("is-visible");t.attr("aria-expanded",!o),e.classed("is-active",!o),e.classed("is-visible",!o),d.classed("modal-open",!o),!0===n&&(o?t.html(()=>c):t.html(()=>'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>'))}var u=n(0),f=n.n(u);var g={showTimer:function(){d3.select(".timer-container").transition().style("opacity",1)},hideTimer:function(){d3.select(".timer-container").transition().style("opacity",0)},resetTimer:function(){d3.select(".timer-container").select(".time").text("00:00:00")}};const h="#353535";function p(){d3.select(".lightbulb-off").classed("hidden",!0),d3.select(".lightbulb-on").classed("hidden",!1)}function y(){d3.select(".lightbulb-off").classed("hidden",!1),d3.select(".lightbulb-on").classed("hidden",!0)}var b={offIntroSlide:function(){d3.select(".intro1").style("background-color",h).style("color"),d3.selectAll(".slide").style("background-color",h),y()},onIntroSlide:function(){d3.select(".intro1").style("background-color","white"),d3.selectAll(".slide").style("background-color","white"),d3.select(".slide1").style("background-color","white"),p()},offStart2020:function(){var e;d3.selectAll(".slide4").style("background-color",h),e="slide4",d3.select("."+e).selectAll("p").style("color",h),y()},onStart2020:function(){d3.selectAll(".slide4").style("background-color","white"),p()},onWinning2020:function(){d3.select(".slide-start-2020").style("background-color","white"),d3.select(".slide4").style("background-color","white"),p()},offWinning2020:function(){d3.select(".slide-start-2020").style("background-color",h),d3.select(".slide4").style("background-color",h),y()},offStart1800:function(){console.log("premature"),d3.select(".slide-1800s-intro").style("background-color",h),d3.select(".slide-1800s-intro").select("p.story-text").style("color","white"),d3.select(".slide-start-2020").style("background-color",h),y()},onStart1800:function(){d3.select(".slide-1800s-intro").style("background-color","white"),d3.select(".slide-start-2020").style("background-color","white"),p()},onWinning1800:function(){d3.select(".slides-container-1800s").style("background-color","white"),d3.select(".win-1800s").style("background-color","white"),d3.select(".win-1800s").select("p").style("color",h),p()},offWinning1800:function(){d3.select(".slides-container-1800s").style("background-color",h),d3.select(".win-1800s").style("background-color",h),y()},offStart2000bc:function(){d3.select(".slide-2000bc-intro").style("background-color",h),d3.select(".slide-2000bc-intro").select("p.story-text").style("color","white"),d3.select(".slide-start-2020").style("background-color",h),y()}};let m,v;const w=d3.select("html"),x=w.select('[data-step="slide5"]').select(".story-large-text"),_=w.select('[data-step="slide5"]').select(".story-text"),k=w.select(".win-2000s"),T=d3.select(".time");let A,S,j,E,O=!1,M=!1;function P(e){S=document.documentElement.scrollTop||document.body.scrollTop,j=parseInt(S-A);const t=new Date(1e3*j).toISOString().substr(11,8);T.text(t),"begin-2000s"===E?j>=2?(b.onWinning2020(),x.transition().style("opacity",0),_.transition().style("opacity",0),k.transition().style("opacity",1),document.removeEventListener("scroll",P),O=!0):j<2&&W():"begin-1800s"===E&&j>=21600-.75*m&&(L(),d3.select(".slide-2000bc-intro").classed("hidden",!1),d3.select(".slides-container-2000bc").classed("hidden",!1)),function(e,t){"begin-2000s"===e&&t>=2||("begin-2000s"===e&&t<2?W():"begin-1800s"===e&&216e3===t?L():"begin-1800s"===e&&216e3===t&&(b.offWinning1800(),document.addEventListener("scroll",P)))}(E,j)}function W(){b.offWinning2020(),x.transition().style("opacity",1),_.transition().style("opacity",1),k.transition().style("opacity",0)}function L(){b.onWinning1800(),document.removeEventListener("scroll",P),M=!0}function I(e){document.addEventListener("scroll",P)}function B(){f()({selector:".slide",enter(e){const t=d3.select(e).attr("data-step");var n;console.log("enter: "+t),"slide1"===(n=t)&&b.onIntroSlide(),"slide5"===n&&b.offStart2020()},exit(e){const t=d3.select(e).attr("data-step");var n;console.log("exit: "+t),"slide1"===(n=t)&&b.offIntroSlide(),"slide5"===n&&b.on()},progress:function(e,t){d3.select(e).attr("data-step")},offset:.5,once:!1}),f()({selector:".slide-start-2020",enter(e){b.offStart2020()},exit(e){const t=d3.select(e).attr("data-step");console.log("exit: "+t),b.onStart2020()},progress:function(e,t){if(1===t){Promise.resolve().then(()=>{w.classed("stop-scrolling",!0)}).then(()=>{d3.select("#begin-2000s").style("visibility","visible")})}else g.hideTimer()},offset:0,once:!1}),f()({selector:".begin-screen-1800",enter(e){O&&b.offStart1800()},exit(e){d3.select(e).attr("data-step")},progress:function(e,t){if(console.log("progress: "+t),console.log(t),t>=.59&&O){Promise.resolve().then(()=>{w.classed("stop-scrolling",!0)}).then(()=>{d3.select("#begin-1800s").style("visibility","visible")})}else console.log("hiding timer")},offset:.4,once:!1}),f()({selector:".begin-screen-2000bc",enter(e){M&&b.offStart2000bc()},exit(e){d3.select(e).attr("data-step")},progress:function(e,t){if(console.log("progress: "+t),console.log(t),t>=.59&&M){Promise.resolve().then(()=>{console.log("2000BC stop scrolling"),w.classed("stop-scrolling",!0)}).then(()=>{d3.select("#begin-2000bc").style("visibility","visible")})}else console.log("hiding timer")},offset:.4,once:!1})}function $(){m=window.innerHeight,v=window.innerWidth,d3.select(".lightbulb-container").style("height",m+"px"),d3.select(".slide").style("background-color","#353535"),d3.select(".lightbulb-off").select("img").style("height",m+"px"),d3.select(".lightbulb-on").select("img").style("height",m+"px"),d3.select(".intro1").style("height",m+"px"),d3.selectAll(".slide").style("height",m+"px"),d3.selectAll(".slide-pre").style("height",m+"px"),d3.selectAll(".slide-1800s-intro").style("height",m+"px"),d3.selectAll(".slide-1800s").style("height",m+"px"),d3.selectAll(".win-1800s").style("height",m+"px"),d3.selectAll(".slide-2000bc-intro").style("height",m+"px")}var q={init:function(){Promise.resolve().then(()=>{$()}).then(()=>{B()}).then(()=>{var e;e=g,d3.selectAll(".button-begin").on("click",(function(){E=this.id,"begin-2000s"===E?(e.resetTimer(),e.showTimer(),d3.select(this).style("visibility","hidden"),d3.select(".slide-1800s-intro").style("display","flex").classed("hidden",!1),w.classed("stop-scrolling",!1),A=document.documentElement.scrollTop||document.body.scrollTop,I()):"begin-1800s"===E?(O=!1,e.resetTimer(),e.showTimer(),d3.select(this).style("visibility","hidden"),w.classed("stop-scrolling",!1),d3.selectAll(".slide-1800s").style("display","flex").classed("hidden",!1),w.classed("stop-scrolling",!1),A=document.documentElement.scrollTop||document.body.scrollTop,I(),d3.select(".slides-container-1800s").style("display","flex").style("height","21600px").classed("hidden",!1)):"begin-2000bc"===E&&(M=!1,e.resetTimer(),e.showTimer(),d3.select(this).style("visibility","hidden"),b.offStart1800(),w.classed("stop-scrolling",!1),d3.selectAll(".slide-2000bc").style("display","flex").classed("hidden",!1),w.classed("stop-scrolling",!1),A=document.documentElement.scrollTop||document.body.scrollTop,I(),d3.select(".slides-container-2000bc").style("display","flex").style("height","205200px").classed("hidden",!1))}))})},resize:$};const D=[{image:"2018_02_stand-up",url:"2018/02/stand-up",hed:"The Structure of Stand-Up Comedy"},{image:"2018_04_birthday-paradox",url:"2018/04/birthday-paradox",hed:"The Birthday Paradox Experiment"},{image:"2018_11_boy-bands",url:"2018/11/boy-bands",hed:"Internet Boy Band Database"},{image:"2018_08_pockets",url:"2018/08/pockets",hed:"Womenâ€™s Pockets are Inferior"}];let F=null;function N(e){return`\n\t<a class='footer-recirc__article' href='https://pudding.cool/${e.url}' target='_blank' rel='noopener'>\n\t\t<img class='article__img' src='https://pudding.cool/common/assets/thumbnails/640/${e.image}.jpg' alt='${e.hed}'>\n\t\t<p class='article__headline'>${e.hed}</p>\n\t</a>\n\t`}var z={init:function(){!function(e){const t=new XMLHttpRequest,n="https://pudding.cool/assets/data/stories.json?v="+Date.now();t.open("GET",n,!0),t.onload=()=>{if(t.status>=200&&t.status<400){const n=JSON.parse(t.responseText);e(n)}else e(D)},t.onerror=()=>e(D),t.send()}(e=>{F=e,function(){const e=window.location.href,t=F.filter(t=>!e.includes(t.url)).slice(0,4).map(N).join("");d3.select(".pudding-footer .footer-recirc__articles").html(t)}()})}};const C=d3.select("body");let R=0;function H(){const e=C.node().offsetWidth;R!==e&&(R=e,q.resize())}function K(){const e=C.select("header");if(e.classed("is-sticky")){const t=C.select("#slide__menu"),n=C.select(".header__toggle");!function(e,t,n,o,s,i){const l=n.selectAll(s).nodes(),r=l[0],d=l[l.length-1];e.on("click",()=>a(o,e,i)),t.on("click",()=>a(o,t,i)),n.on("keydown",t=>{const n=t.code,s=o.classed("is-visible");"Escape"===n&&!0===s&&(e.attr("aria-expanded",!1),e.node().focus(),o.classed("is-active",!1),o.classed("is-visible",!1),!0===i&&e.html(()=>c))}),d3.select(r).on("keydown",e=>{if(o.classed("is-visible")){const t=e.code,n=e.shiftKey;"Tab"===t&&!0===n&&(e.preventDefault(),d.focus())}}),d3.select(d).on("keydown",e=>{if(o.classed("is-visible")){const t=e.code,n=e.shiftKey;"Tab"===t&&!1===n&&(e.preventDefault(),r.focus())}})}(n,n,e,t,"a, button, .logo",!0)}}r(),C.classed("is-mobile",l.any()),window.addEventListener("resize",s()(H,150)),K(),q.init(),z.init()}]);