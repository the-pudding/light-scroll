!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";var o,i;void 0===(i="function"==typeof(o=function(){return function(e){function t(){var e=document.documentElement.clientHeight,t=window.innerHeight||0;_=Math.max(e,t)}function n(){w=!1;var e=function(){if(p&&"number"==typeof p){var e=Math.min(Math.max(0,p),1);return _-e*_}return _}();(x=x.filter((function(t){var n=t.getBoundingClientRect(),o=n.top,i=n.bottom,s=n.height,l=o<e,r=i<e;if(l&&!t.__ev_entered){if(a(t),t.__ev_progress=0,y(t,t.__ev_progress),m)return!1}else!l&&t.__ev_entered&&(t.__ev_progress=0,y(t,t.__ev_progress),f(t));if(l&&!r){var c=(e-o)/s;t.__ev_progress=Math.min(1,Math.max(0,c)),y(t,t.__ev_progress)}return l&&r&&1!==t.__ev_progress&&(t.__ev_progress=1,y(t,t.__ev_progress)),t.__ev_entered=l,!0}))).length||window.removeEventListener("scroll",o,!0)}function o(){w||(w=!0,v(n))}function i(){t(),n()}function s(){t(),n()}function l(e){for(var t=e.length,n=[],o=0;o<t;o+=1)n.push(e[o]);return n}function r(){x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"==typeof e?l(t.querySelectorAll(e)):e instanceof NodeList?l(e):e instanceof Array?e:void 0}(c)}var c=e.selector,d=e.enter,a=void 0===d?function(){}:d,u=e.exit,f=void 0===u?function(){}:u,g=e.progress,y=void 0===g?function(){}:g,b=e.offset,p=void 0===b?0:b,h=e.once,m=void 0!==h&&h,v=null,w=!1,x=[],_=0;c?(r(),x&&x.length?(v=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},window.addEventListener("resize",i,!0),window.addEventListener("scroll",o,!0),window.addEventListener("load",s,!0),i(),n()):console.error("no selector elements found")):console.error("must pass a selector")}})?o.call(t,n,t,e):o)||(e.exports=i)},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,r="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,d=r||c||Function("return this")(),a=Object.prototype.toString,u=Math.max,f=Math.min,g=function(){return d.Date.now()};function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==a.call(e)}(e))return NaN;if(y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var r=i.test(e);return r||s.test(e)?l(e.slice(2),r?2:8):o.test(e)?NaN:+e}e.exports=function(e,t,n){var o,i,s,l,r,c,d=0,a=!1,p=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=o,s=i;return o=i=void 0,d=t,l=e.apply(s,n)}function v(e){return d=e,r=setTimeout(x,t),a?m(e):l}function w(e){var n=e-c;return void 0===c||n>=t||n<0||p&&e-d>=s}function x(){var e=g();if(w(e))return _(e);r=setTimeout(x,function(e){var n=t-(e-c);return p?f(n,s-(e-d)):n}(e))}function _(e){return r=void 0,h&&o?m(e):(o=i=void 0,l)}function k(){var e=g(),n=w(e);if(o=arguments,i=this,c=e,n){if(void 0===r)return v(c);if(p)return r=setTimeout(x,t),m(c)}return void 0===r&&(r=setTimeout(x,t)),l}return t=b(t)||0,y(n)&&(a=!!n.leading,s=(p="maxWait"in n)?u(b(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h),k.cancel=function(){void 0!==r&&clearTimeout(r),d=0,o=c=i=r=void 0},k.flush=function(){return void 0===r?l:_(g())},k}}).call(this,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n.n(o);const s={android:()=>navigator.userAgent.match(/Android/i),blackberry:()=>navigator.userAgent.match(/BlackBerry/i),ios:()=>navigator.userAgent.match(/iPhone|iPad|iPod/i),opera:()=>navigator.userAgent.match(/Opera Mini/i),windows:()=>navigator.userAgent.match(/IEMobile/i),any:()=>s.android()||s.blackberry()||s.ios()||s.opera()||s.windows()};var l=s;function r(){(function(e,t=document){return[...t.querySelectorAll(e)]})("[target='_blank']").forEach(e=>e.setAttribute("rel","noopener"))}const c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>',d=d3.select("body");function a(e,t,n){const o=e.classed("is-visible");t.attr("aria-expanded",!o),e.classed("is-active",!o),e.classed("is-visible",!o),d.classed("modal-open",!o),!0===n&&(o?t.html(()=>c):t.html(()=>'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>'))}var u=n(0),f=n.n(u),g=function(e,t,n,o){return(e/=o/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b=function(){var e=void 0,t=void 0,n=void 0,o=void 0,i=void 0,s=void 0,l=void 0,r=void 0,c=void 0,d=void 0,a=void 0,u=void 0;function f(){return window.scrollY||window.pageYOffset}function b(e){return e.getBoundingClientRect().top+t}function p(n){c||(c=n),a=i(d=n-c,t,l,r),window.scrollTo(0,a),d<r?window.requestAnimationFrame(p):function(){window.scrollTo(0,t+l),e&&s&&(e.setAttribute("tabindex","-1"),e.focus());"function"==typeof u&&u();c=!1}()}return function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(r=d.duration||1e3,o=d.offset||0,u=d.callback,i=d.easing||g,s=d.a11y||!1,t=f(),void 0===c?"undefined":y(c)){case"number":e=void 0,s=!1,n=t+c;break;case"object":n=b(e=c);break;case"string":e=document.querySelector(c),n=b(e)}switch(l=n-t+o,y(d.duration)){case"number":r=d.duration;break;case"function":r=d.duration(l)}window.requestAnimationFrame(p)}}();var p={showTimer:function(){d3.select(".timer-container").transition().style("opacity",1)},hideTimer:function(){d3.select(".timer-container").transition().style("opacity",0)},resetTimer:function(){d3.select(".timer-container").select(".time").text("00:00:00")}};const h="#0D0F2A",m="#FFF9E2";function v(){d3.select(".lightbulb-off").classed("hidden",!0),d3.select(".lightbulb-on").classed("hidden",!1),d3.select(".timer-title").classed("white-text",!1),d3.select(".timer-labels").classed("white-text",!1)}function w(){d3.select(".lightbulb-off").classed("hidden",!1),d3.select(".lightbulb-on").classed("hidden",!0),d3.select(".timer-title").classed("white-text",!0),d3.select(".timer-labels").classed("white-text",!0)}var x={bulbOff:w,bulbOn:v,offIntroSlide:function(){d3.select(".intro1").style("background-color",h).style("color","white"),d3.selectAll(".slide").style("background-color",h),w()},onIntroSlide:function(){d3.select(".intro1").style("background-color",m),d3.selectAll(".slide").style("background-color",m),d3.select(".slide1").style("background-color",m),v()},offStart2020:function(){var e;d3.select(".slide4").style("background-color",h),e="slide4",d3.select("."+e).selectAll("p").style("color","#0D0F2A"),w()},onStart2020:function(){d3.selectAll(".slide4").style("background-color",m),v()},offResetStart2020:function(){d3.select(".slide-start-2020").style("background-color",h),d3.select(".slide4").style("background-color",h),d3.select(".slide5").select("p.story-large-text").style("color","white"),d3.select(".slide5").select("p.story-text").style("color","white"),w()},onWinning2020:function(){d3.select(".slide-start-2020").style("background-color",m),d3.select(".slide4").style("background-color",m),d3.select("p.win-2000s").style("color","#0F0E2C"),v()},offWinning2020:function(){d3.select(".slide-start-2020").style("background-color",h),d3.select(".slide4").style("background-color",h),w()},offStart1800:function(){d3.select(".slide-1800s-intro").style("background-color",h),d3.select(".slide-1800s-intro").select("p.story-text").style("color","white"),d3.select(".slide-start-2020").style("background-color",h),w()},onStart1800:function(){d3.select(".slide-1800s-intro").style("background-color",m),d3.select(".slide-start-2020").style("background-color",m),v()},onWinning1800:function(){d3.select(".slides-container-1800s").style("background-color",m),d3.select(".win-1800s").style("background-color",m),d3.select(".win-1800s").select("p").style("color",h),v()},offWinning1800:function(){d3.select(".slides-container-1800s").style("background-color",h),d3.select(".win-1800s").style("background-color",h),w()},offStart2000bc:function(){d3.select(".slide-2000bc-intro").style("background-color",h),d3.select(".slides-container-1800s").style("background-color",h),d3.select(".slide-2000bc-intro").select("p.story-text").style("color","white"),d3.select(".slide-start-2020").style("background-color",h),d3.select(".win-1800s").style("background-color",h),w()},onWinning2000bc:function(){d3.select(".slide-2000bc-final").style("background-color",m),d3.select(".slide-2000bc-final").select("p").style("color",h),v()},offWinning2000bc:function(){d3.select(".slide-2000bc-final").style("background-color",h),w()}};let _,k;const S=d3.select("html"),T=S.select('[data-step="slide5"]').select(".story-large-text"),A=S.select('[data-step="slide5"]').select(".story-text"),j=S.select(".win-2000s"),E=d3.select(".time");let M,O,W,F,P=!1,q=!1,B=!1,I=!1,L=!1,R=!1;function $(e){O=document.documentElement.scrollTop||document.body.scrollTop,W=parseInt(O-M);const t=function(e){if(e>=0){return Math.floor(e/3600/10).toString()+Math.floor(e/3600%10).toString()+":"+Math.floor(e%3600/60/10).toString()+Math.floor(e%3600/60%10).toString()+":"+Math.floor(e%86400%3600%60/10).toString()+Math.floor(e%86400%3600%60%10).toString()}return"00:00:00"}(W);E.text(t),"begin-2000s"===F?W>=2?(x.onWinning2020(),q=!0,T.transition().style("opacity",0),A.transition().style("opacity",0),j.transition().style("opacity",1),document.removeEventListener("scroll",$),B=!0,P=!0):W<2&&P&&C():"begin-1800s"===F?W>=21600-.75*_?(D(),d3.select(".slide-2000bc-intro").classed("hidden",!1),d3.select(".slides-container-2000bc").classed("hidden",!1)):W<0&&(p.hideTimer(),p.resetTimer()):"begin-2000bc"===F&&W<0&&(p.hideTimer(),p.resetTimer()),function(e,t){"begin-2000s"===e&&t>=2||("begin-2000s"===e&&t<2?C():"begin-1800s"===e&&t>=216e3&&D())}(F,W)}function C(){console.log("unwinning"),x.offWinning2020(),T.transition().style("opacity",1),A.transition().style("opacity",1),j.transition().style("opacity",0)}function D(){x.onWinning1800(),document.removeEventListener("scroll",$),L=!0}function N(e){document.addEventListener("scroll",$)}function z(){f()({selector:".slide",enter(e){const t=d3.select(e).attr("data-step");var n;console.log("enter: "+t),"slide1"===(n=t)&&x.onIntroSlide(),"slide5"===n&&x.offStart2020()},exit(e){const t=d3.select(e).attr("data-step");var n;console.log("exit: "+t),"slide1"===(n=t)&&(x.offIntroSlide(),S.classed("stop-scrolling",!1)),"slide5"===n&&x.on()},progress:function(e,t){d3.select(e).attr("data-step")},offset:.5,once:!1}),f()({selector:".slide-start-2020",enter(e){x.offStart2020()},exit(e){const t=d3.select(e).attr("data-step");console.log("exit: "+t),x.onStart2020()},progress:function(e,t){if(1===t){Promise.resolve().then(()=>{S.classed("stop-scrolling",!0)}).then(()=>{d3.select("#begin-2000s").style("visibility","visible")})}else q&&(x.offResetStart2020(),T.transition().style("opacity",1),A.transition().style("opacity",1),j.transition().style("opacity",0),d3.select(".slide-1800s-intro").classed("hidden",!0),p.hideTimer())},offset:0,once:!1}),f()({selector:".begin-screen-1800",enter(e){B&&x.offStart1800()},exit(e){d3.select(e).attr("data-step");x.onStart1800()},progress:function(e,t){if(console.log(t),t>=.59&&B){Promise.resolve().then(()=>{S.classed("stop-scrolling",!0)}).then(()=>{d3.select("#begin-1800s").style("visibility","visible"),I=!0})}else t<.59&&I&&(p.hideTimer(),d3.select("#begin-1800s").style("visibility","visible"),S.classed("stop-scrolling",!0),I=!1,console.log("hiding timer"))},offset:.4,once:!1}),f()({selector:".begin-screen-2000bc",enter(e){L&&x.offStart2000bc()},exit(e){d3.select(e).attr("data-step")},progress:function(e,t){if(console.log("progress: "+t),console.log(t),t>=.59&&L){Promise.resolve().then(()=>{console.log("2000BC stop scrolling"),S.classed("stop-scrolling",!0)}).then(()=>{d3.select("#begin-2000bc").style("visibility","visible")})}else console.log("hiding timer")},offset:.4,once:!1}),f()({selector:".slide-2000bc-final",enter(e){x.onWinning2000bc(),R&&d3.select(".pudding-footer").style("display","block")},exit(e){console.log("exiting!!"),x.offWinning2000bc(),d3.select(".pudding-footer").style("display","none")},offset:.4,once:!1})}function H(){var e;_=window.innerHeight,k=window.innerWidth,d3.select(".lightbulb-container").style("height",_+"px"),d3.select(".chain-background").style("height",""+(e=k,e<=200?"47%":e>200&&e<=350?"45.5%":e>350&&e<=450?"44.5%":e>450&&e<=550?"43%":e>550&&e<=650?"42%":e>650&&e<=750?"41%":e>750&&e<=850?"39.5%":e>850&&e<=950?"38%":e>950&&e<=1050?"36.5%":e>1050&&e<=1150?"35%":e>1150&&e<=1250?"33.5%":e>1200&&e<=1350?"32%":e>1350&&e<=1450?"30.5%":e>1450&&e<=1550?"29%":e>1550&&e<=1650?"27.5%":e>1650&&e<=1750?"26%":e>1750&&e<=1850||e>1750&&e<=1850?"24.5%":void 0)).style("background-color","white"),d3.select(".lightbulb-off").select("img").style("height",_+"px"),d3.select(".lightbulb-on").select("img").style("height",_+"px"),d3.select(".intro1").style("height",_+"px"),d3.selectAll(".slide").style("height",_+"px"),d3.selectAll(".slide-pre").style("height",_+"px"),d3.selectAll(".slide-1800s-intro").style("height",_+"px"),d3.selectAll(".slide-1800s").style("height",_+"px"),d3.selectAll(".win-1800s").style("height",_+"px"),d3.selectAll(".slide-2000bc-intro").style("height",_+"px"),d3.selectAll(".slide-2000bc").style("height",_+"px"),d3.selectAll(".slide-2000bc-final").style("height",_+"px")}var K={init:function(){Promise.resolve().then(()=>{H(),x.bulbOff()}).then(()=>{z()}).then(()=>{var e;e=p,d3.selectAll(".button-begin").on("click",(function(){F=this.id,"begin-2000s"===F?(e.resetTimer(),e.showTimer(),d3.select(this).style("visibility","hidden"),d3.select(".slide-1800s-intro").style("display","flex").classed("hidden",!1),S.classed("stop-scrolling",!1),M=document.documentElement.scrollTop||document.body.scrollTop,N()):"begin-1800s"===F?(B=!1,e.resetTimer(),e.showTimer(),d3.select(this).style("visibility","hidden"),S.classed("stop-scrolling",!1),d3.selectAll(".slide-1800s").style("display","flex").classed("hidden",!1),S.classed("stop-scrolling",!1),M=document.documentElement.scrollTop||document.body.scrollTop,N(),d3.select(".slides-container-1800s").style("display","flex").style("height","21600px").classed("hidden",!1)):"begin-2000bc"===F&&(L=!1,e.resetTimer(),e.showTimer(),d3.select(this).style("visibility","hidden"),x.offStart1800(),S.classed("stop-scrolling",!1),d3.selectAll(".slide-2000bc").style("display","flex").classed("hidden",!1),S.classed("stop-scrolling",!1),M=document.documentElement.scrollTop||document.body.scrollTop,N(),d3.select(".slides-container-2000bc").style("display","flex").style("height","205200px").classed("hidden",!1))})),d3.select(".button-scroll-shortcut").on("click",()=>{d3.select(".slide-2000bc-final").classed("hidden",!1),R=!0,b(".slide-2000bc-final",{duration:5e3,offset:.5})})}).then(()=>{x.offIntroSlide()})},resize:H};const Y=[{image:"2018_02_stand-up",url:"2018/02/stand-up",hed:"The Structure of Stand-Up Comedy"},{image:"2018_04_birthday-paradox",url:"2018/04/birthday-paradox",hed:"The Birthday Paradox Experiment"},{image:"2018_11_boy-bands",url:"2018/11/boy-bands",hed:"Internet Boy Band Database"},{image:"2018_08_pockets",url:"2018/08/pockets",hed:"Womenâ€™s Pockets are Inferior"}];let G=null;function J(e){return`\n\t<a class='footer-recirc__article' href='https://pudding.cool/${e.url}' target='_blank' rel='noopener'>\n\t\t<img class='article__img' src='https://pudding.cool/common/assets/thumbnails/640/${e.image}.jpg' alt='${e.hed}'>\n\t\t<p class='article__headline'>${e.hed}</p>\n\t</a>\n\t`}var U={init:function(){!function(e){const t=new XMLHttpRequest,n="https://pudding.cool/assets/data/stories.json?v="+Date.now();t.open("GET",n,!0),t.onload=()=>{if(t.status>=200&&t.status<400){const n=JSON.parse(t.responseText);e(n)}else e(Y)},t.onerror=()=>e(Y),t.send()}(e=>{G=e,function(){const e=window.location.href,t=G.filter(t=>!e.includes(t.url)).slice(0,4).map(J).join("");d3.select(".pudding-footer .footer-recirc__articles").html(t)}()})}};const X=d3.select("body");let Q=0;function V(){const e=X.node().offsetWidth;Q!==e&&(Q=e,K.resize())}function Z(){const e=X.select("header");if(e.classed("is-sticky")){const t=X.select("#slide__menu"),n=X.select(".header__toggle");!function(e,t,n,o,i,s){const l=n.selectAll(i).nodes(),r=l[0],d=l[l.length-1];e.on("click",()=>a(o,e,s)),t.on("click",()=>a(o,t,s)),n.on("keydown",t=>{const n=t.code,i=o.classed("is-visible");"Escape"===n&&!0===i&&(e.attr("aria-expanded",!1),e.node().focus(),o.classed("is-active",!1),o.classed("is-visible",!1),!0===s&&e.html(()=>c))}),d3.select(r).on("keydown",e=>{if(o.classed("is-visible")){const t=e.code,n=e.shiftKey;"Tab"===t&&!0===n&&(e.preventDefault(),d.focus())}}),d3.select(d).on("keydown",e=>{if(o.classed("is-visible")){const t=e.code,n=e.shiftKey;"Tab"===t&&!1===n&&(e.preventDefault(),r.focus())}})}(n,n,e,t,"a, button, .logo",!0)}}r(),X.classed("is-mobile",l.any()),window.addEventListener("resize",i()(V,150)),Z(),K.init(),U.init()}]);